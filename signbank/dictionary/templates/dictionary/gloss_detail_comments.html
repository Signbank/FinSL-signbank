{% load i18n %}
{% load bootstrap3 %}
{% load comments %}
{% get_comment_count for gloss as comment_count %}
<div id="gloss-comments" class="panel panel-default">
    <div class="panel-heading">
        <strong>{% blocktrans %}Comments{% endblocktrans %}</strong> ({{comment_count}})
    </div>
    <div class="panel-body">
    {% render_comment_list for gloss %}
    </div>
    {% if user.is_authenticated %}
    <div class="panel-footer">
        {% get_comment_form for gloss as formcomment %}
        <form action="{% comment_form_target %}" method="POST">
        {% csrf_token %}
        <div class="form-group">
            <label class="control-label" for="id_comment">{% blocktrans %}Comment{% endblocktrans %}</label>
            <textarea name="comment" rows="3" title="" required="" cols="40" id="id_comment"
                      maxlength="3000" placeholder="{% blocktrans %}Comment{% endblocktrans %}"
                      class="form-control"></textarea>
        </div>
        <input name="honeypot" id="id_honeypot" type="text" style="display:none;">
        {{ formcomment.content_type }}
        {{ formcomment.object_pk }}
        {{ formcomment.timestamp }}
        {{ formcomment.security_hash }}
        {% bootstrap_field commenttagform.tag %}
        <input type="hidden" name="next" value="{% url 'dictionary:admin_gloss_view' gloss.id %}">
        <button type="submit" class="btn btn-default" id="id_submit_comm">
            {% blocktrans %}Add comment{% endblocktrans %}</button>
        </form>
    </div>
    {% else %}
        <p>Please <a href="{% url 'login' %}">log in</a> to leave a comment.</p>
    {% endif %}
</div>